(this["webpackJsonpreact-sn"]=this["webpackJsonpreact-sn"]||[]).push([[5],{384:function(e,t,n){e.exports={Users:"Users_Users__1sqOy",Users__button:"Users_Users__button__1k46x",Users__container:"Users_Users__container__3kzvl"}},385:function(e,t,n){e.exports={UserCard:"UserCard_UserCard__3y7kK",UserCard__button:"UserCard_UserCard__button__2kDBd",UserCard__avatar:"UserCard_UserCard__avatar__3zR3R",UserCard__left:"UserCard_UserCard__left__34gdq",UserCard__right:"UserCard_UserCard__right__3DtvN"}},386:function(e,t,n){e.exports={Paginator:"Paginator_Paginator__31iv1",Paginator__item:"Paginator_Paginator__item__234dI",selectedPage:"Paginator_selectedPage__3TjlG"}},395:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n(384),s=n.n(c),i=n(24),u=n(385),o=n.n(u),l=n(29),d=n(170),f=n(1),b=function(e){var t=e.id,n=e.imgUrl,r=e.isFollow,a=e.btnDisabledIdArray,c=e.unFollow,s=e.name,i=e.status,u=e.follow;return Object(f.jsxs)("div",{className:o.a.UserCard,children:[Object(f.jsxs)("div",{className:o.a.UserCard__left,children:[Object(f.jsx)(l.b,{to:"/profile/"+t,children:Object(f.jsx)("img",{className:o.a.UserCard__avatar,src:null!==n?n:d.a,alt:"avatar"})}),r?Object(f.jsx)("button",{disabled:!!a.some((function(e){return e===t})),id:t.toString(),onClick:function(){return c(t)},className:o.a.UserCard__button,children:"UNFOLLOW"}):Object(f.jsx)("button",{disabled:!!a.some((function(e){return e===t})),id:t.toString(),onClick:function(){u(t)},className:o.a.UserCard__button,children:"FOLLOW"})]}),Object(f.jsxs)("div",{className:o.a.UserCard__right,children:[Object(f.jsx)("span",{children:s}),Object(f.jsx)("span",{children:i})]})]})},j=n(10),_=n(386),g=n.n(_),O=function(e){var t=e.currentPage,n=e.changePage,r=e.pages,c=Object(a.useState)(1),s=Object(j.a)(c,2),i=s[0],u=s[1],o=10*(i-1),l=10*i;return Object(f.jsxs)("div",{className:g.a.Paginator,children:[Object(f.jsx)("button",{onClick:function(){1<i&&u((function(e){return e-1}))},children:"-"}),r.filter((function(e){return e>=o&&e<=l})).map((function(e,r){return Object(f.jsx)("span",{id:e.toString(),onClick:n,className:t===e?g.a.selectedPage:g.a.Paginator__item,children:e},r)})),Object(f.jsx)("button",{onClick:function(){Math.ceil(r.length/10)>i&&u((function(e){return e+1}))},children:"+"})]})},h=n(20),m=n.n(h),p=n(36),U=n(13),v=n(27),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v.b.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===r?"":"&friend=".concat(r)))},x=function(e){return v.b.post("follow/".concat(e)).then((function(e){return e.data}))},P=function(e){return v.b.delete("follow/".concat(e)).then((function(e){return e.data}))},w=function(e){return{type:U.e,id:e}},y=function(e){return{type:U.c,id:e}},S=function(e){return{type:U.g,bool:e}},k=function(e){return{type:U.d,id:e}},N=function(e){return{type:U.k,filter:e}},F=function(e,t,n){return function(){var r=Object(p.a)(m.a.mark((function r(a){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(S(!0)),a(y(e)),a(N(n)),r.next=5,C(e,t,n.term,n.friend).then((function(e){var t,n;a((t=e.data.items,{type:U.n,users:t})),a((n=e.data.totalCount,{type:U.o,count:n})),a(S(!1))}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},z=n(75),D=n(179),E=n(393),I=function(e){var t=Object(i.d)((function(e){return e.usersPage.filter}));return Object(f.jsx)(E.c,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},validate:function(e){return{}},onSubmit:function(t,n){var r=n.setSubmitting,a={term:t.term,friend:"null"===t.friend?null:"true"===t.friend};e.onFilterChanged(a),r(!1)},children:function(e){var t=e.isSubmitting;return Object(f.jsxs)(E.b,{children:[Object(f.jsx)(E.a,{type:"text",name:"term"}),Object(f.jsxs)(E.a,{name:"friend",as:"select",children:[Object(f.jsx)("option",{value:"null",children:"All"}),Object(f.jsx)("option",{value:"true",children:"Only followed"}),Object(f.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(f.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})},L=n(21),A=n(390);t.default=Object(i.b)(null,{changeCurrentPage:y,followFetchingToggle:k})(Object(z.a)((function(e){var t=Object(i.d)((function(e){return e.usersPage.totalUsersCount})),n=Object(i.d)((function(e){return e.usersPage.currentPage})),c=Object(i.d)((function(e){return e.usersPage.pageSize})),u=Object(i.d)((function(e){return e.usersPage.filter})),o=Object(i.d)((function(e){return e.usersPage.followFetchingId})),l=Object(i.d)((function(e){return e.usersPage.isFetch})),d=Object(i.d)((function(e){return e.usersPage.users})),j=Object(i.c)(),_=Object(L.g)();Object(a.useEffect)((function(){var e=A.parse(_.location.search.substr(1)),t=n,a=u;switch(e.page&&(t=Number(e.page)),e.term&&(a=Object(r.a)(Object(r.a)({},a),{},{term:e.term})),e.friend){case"null":a=Object(r.a)(Object(r.a)({},a),{},{friend:null});break;case"true":a=Object(r.a)(Object(r.a)({},a),{},{friend:!0});break;case"false":a=Object(r.a)(Object(r.a)({},a),{},{friend:!1})}j(F(t,c,a))}),[]),Object(a.useEffect)((function(){var e={};u.term&&(e.term=u.term),null!==u.friend&&(e.friend=String(u.friend)),1!==n&&(e.page=String(n)),_.push({pathname:"/users",search:A.stringify(e)})}),[u,n,_]);for(var g=function(e){var t;j((t=e,function(e){e(k(t)),P(t).then((function(n){n.resultCode===v.a.SUCCESS&&(e(w(t)),e(k(t)))}))}))},h=function(e){var t;j((t=e,function(e){e(k(t)),x(t).then((function(n){n.resultCode===v.a.SUCCESS&&(e(w(t)),e(k(t)))}))}))},m=Math.ceil(t/c),p=[],U=1;U<=m;U++)p.push(U);return Object(f.jsxs)("div",{className:s.a.Users,children:[Object(f.jsx)("h1",{children:"users"}),Object(f.jsx)(I,{onFilterChanged:function(e){j(F(1,c,e))}}),Object(f.jsx)(O,{pages:p,changePage:function(e){j(F(+e.target.id,c,u))},currentPage:n}),Object(f.jsxs)("div",{className:s.a.Users__container,children:[l?Object(f.jsx)(D.a,{}):null,l?null:d.map((function(e,t){return Object(f.jsx)(b,{id:e.id,name:e.name,status:e.status,isFollow:e.followed,imgUrl:e.photos.small,btnDisabledIdArray:o,follow:h,unFollow:g},t)}))]})]})})))}}]);
//# sourceMappingURL=5.0616d1f0.chunk.js.map